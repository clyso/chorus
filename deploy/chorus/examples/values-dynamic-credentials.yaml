# Example: Dynamic Credentials Configuration
# Manage storage credentials via API instead of config files
# This is useful when:
# - Credentials need to be rotated frequently
# - Credentials are managed by external systems (Vault, etc.)
# - You want to add users without redeploying

# Dynamic credentials configuration (similar pattern to redis)
dynamicCredentials:
  enabled: true
  disableEncryption: false  # Keep credentials encrypted in Redis
  pollInterval: 5s          # How often to check for credential updates

  # Option 1: Inline master password (for dev/testing only)
  masterPassword: "your-secure-master-password-here"

  # Option 2: Use existing secret (recommended for production)
  # existingSecret: "my-chorus-encryption-secret"
  # existingSecretKey: "master-password"

storage:
  main: main

  storages:
    main:
      type: S3
      address: s3.example.com
      provider: Ceph
      isSecure: true
      # Note: No credentials here - managed via API

    follower:
      type: S3
      address: s3-backup.example.com
      provider: Ceph
      isSecure: true

# You can still provide initial credentials in config
# These will be loaded on startup
credentials:
  storages:
    main:
      initial-admin:
        accessKeyID: "AKIAIOSFODNN7EXAMPLE"
        secretAccessKey: "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

# After deployment, add more credentials via chorctl:
#
# Add S3 credentials:
#   chorctl set-user --storage main --user new-user --type s3 \
#     --access-key NEWAKEYID --secret-key NEWSECRETKEY
#
# Add Swift credentials:
#   chorctl set-user --storage swift-main --user projectId123 --type swift \
#     --swift-username myuser --swift-password mypassword \
#     --swift-domain Default --swift-tenant mytenant

proxy:
  enabled: true
  config:
    auth:
      useStorage: main

worker:
  replicas: 2
  config:
    concurrency: 10
